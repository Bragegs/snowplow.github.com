---
layout: post
title: "SQL Runner 0.3.0 released"
title-short: SQL Runner 0.3.0
tags: [sql, redshift, ssl]
author: Josh
category: Releases
---

We are pleased to announce version [0.3.0] [030-release] of [SQL Runner] [repo]. SQL Runner is an open source app, written in Go, that makes it easy to execute SQL statements programmatically as part of the Snowplow data pipeline.  This release brings several new options to how you can use the sql-runner.  Many thanks to [Alessandro Andrioni][andrioni] for his huge contributions towards this release!

1. [New features](/blog/2015/11/04/sql-runner-0.3.0-released/#new-features)
2. [Upgrading](/blog/2015/11/04/sql-runner-0.3.0-released/#upgrading)
3. [Getting help](/blog/2015/11/04/sql-runner-0.3.0-released/#help)

<!--more-->

For more information on SQL Runner please view [the GitHub repository] [repo].

<h2 id="new-features">1. New features</h2>

The core new feature of this release is a host of new ways to add template variables to the sql-runner as well as the addition of AWS credentials support.

First off we have the `-var` CLI argument.  This allows you to pass in a series of key-pair values which will be used for templating purposes.

{% highlight bash %}
$ sql-runner -var key1=val1 -var key2=val2
{% endhighlight %}

This can be used in place of saving them in your Playbook file to remove the risk of accidently commiting private information or for easy changing of variables.

The second new feature is the ability to have your AWS credentials templated.  Again removing the risk of accidently commiting information.  There are four different template variables available for this:

* `awsEnvCredentials`: supports passing credentials through environment variables - `AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`
* `awsProfileCredentials`: supports getting credentials from a credentials file
* `awsEC2RoleCredentials`: supports getting role-based credentials
* `awsChainCredentials`: tries to get credentials from each of the three methods above in order, using the first one returned

Each of these will output the string in the Redshift credentials format; `CREDENTIALS 'aws_access_key_id=%s;aws_secret_access_key=%s'`.

Many thanks to [Alessandro Andrioni][andrioni] for these great new features!

We have also added the ability to start the sql-runner from a given step in your playbook.  Allowing for much faster restarts in the case of a step failure.

{% highlight bash %}
$ sql-runner -fromStep "The step to start from"
{% endhighlight %}

Some notes on this:

* When passing the step name ensure you wrap it in double quotes.
* This must be a valid name; if the name does not exist the sql-runner will fail-fast.
* All targets will be started from the same step.

<h2 id="upgrading">2. Upgrading</h2>

A version of SQL Runner for 64-bit Linux, Windows and OSX is available on Bintray, download them like so:

{% highlight bash %}
# Linux
$ wget http://dl.bintray.com/snowplow/snowplow-generic/sql_runner_0.3.0_linux_amd64.zip

# Windows
$ wget http://dl.bintray.com/snowplow/snowplow-generic/sql_runner_0.3.0_windows_amd64.zip

# OSX
$ wget http://dl.bintray.com/snowplow/snowplow-generic/sql_runner_0.3.0_darwin_amd64.zip
{% endhighlight %}

Once downloaded, unzip it (Linux for example):

{% highlight bash %}
$ unzip sql_runner_0.3.0_linux_amd64.zip
{% endhighlight %}

Run it like so:

{% highlight bash %}
$ ./sql-runner
sql-runner version: 0.3.0
Run playbooks of SQL scripts in series and parallel on Redshift and Postgres
Usage:
  -help=false: Shows this message
  -playbook="": Playbook of SQL scripts to execute
  -sqlroot="PLAYBOOK": Absolute path to SQL scripts. Use PLAYBOOK and BINARY for those respective paths
  -fromStep="": Starts from a given step defined in your playbook
  -var=map[]: Variables to be passed to the playbook, in the key=value format (default map[])
  -version=false: Shows the program version
{% endhighlight %}

<h2 id="help">3. Getting help</h2>

For more details on this release, please check out the [SQL Runner 0.3.0 release notes][030-release] on GitHub.

If you have any questions or run into any problems, please [raise an issue][issues] or get in touch with us through [the usual channels][talk-to-us].

[andrioni]: https://github.com/andrioni

[repo]: https://github.com/snowplow/sql-runner
[issues]: https://github.com/snowplow/sql-runner/issues
[030-release]: https://github.com/snowplow/sql-runner/releases/tag/0.3.0
[talk-to-us]: https://github.com/snowplow/snowplow/wiki/Talk-to-us
